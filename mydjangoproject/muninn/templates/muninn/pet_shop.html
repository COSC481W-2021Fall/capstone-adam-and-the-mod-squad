{% extends "muninn/base.html" %} {% load static %} {% block content %}
<div class="basic-margin">
    <h1 class="mt-4">Pet Shop</h1>
    <!-- Trigger/Open The Modal -->
    <button id="myBtn">Open Modal</button>
    <div class="m-sm-auto row-cols-xl-4">

        {% if animalList %}
        {% for animal in animalList %}
        
        <div class="card-header basic-margin psp-card" style="float:left; opacity:{% if animal.level > level %}50% {% else %} 100% {% endif %}">
            <div class="card-body psp-card-inner" ">
                <span><b>{{animal.name}}</b></span><br>
                <img class="petshop "src= "..\..\static\muninn\images\{{animal.file_name}}.png" ><br>      
            </div>
            <table>
                <tr class="psp-info-line">
                    <td> <h5>LV: {{animal.level}}</h5></td><td><h5>COST: {{animal.price}}</h5></td>
                </tr>
                <tr class="psp-info-line">
                    
                    <td> 
                        <form method="POST" action="">
                            {% csrf_token %}
                            <input hidden value="{{ animal.file_name }}" name="hidden-animal">
                            <input type="submit" value="BUY" class="btn btn-outline-danger" id="buy" {% if money < animal.price %} disabled {% endif %}></td>
                        </form>
                </tr>
            </table>
            
        </div>
        {% endfor %}
        {% else %}
            <p>Error Loading Pets</p>
        {% endif %}
        </div>

       <!-- The Modal -->
    <div id="myModal" class="modal" style="display:none">

        <!-- Modal content -->
        <div class="modal-content">
        <span class="close">&times;</span>
        <p>Some text in the Modal..</p>
        </div>
    
    </div> 
</div>
<script>
    // change this function to take 'animal' primary key (animal.file_name) as parameter
    // on the button definition onClick to function

    // Get the modal
    var modal = document.getElementById("myModal");
       
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // When the user clicks the button, open the modal 
    btn.onclick = function() {
      modal.style.display = "block";
    }
    function butAnimal(animal_pk) {
        modal.style.display = "block";
        //hidden value for button
    }
    
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
    </script>
{% endblock content %}